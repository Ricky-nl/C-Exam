<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>MCQ Exam</title>
</head>
<body>
    <h1>Answer the Questions</h1>
    <form id="quiz-form">
        <div id="question-container"></div>
        <button type="submit">Submit All</button>
    </form>
    <h2 id="score" style="display: none;"></h2>

    <script>
        const theoreticalQuestions = [
  {
    question: "What will be the output of the following code? \n\nint* ptr = malloc(sizeof(int)); *ptr = 10; printf('%d', *ptr);",
    correctAnswer: "10",
    incorrectAnswers: [
      "0",
      "NULL",
      "Segmentation fault"
    ]
  },
  {
    question: "Given the following struct definition: \n\nstruct Point { int x, y; }; struct Point p1 = {5, 10}; What will be printed by printf('%d', p1.x);",
    correctAnswer: "5",
    incorrectAnswers: [
      "10",
      "Segmentation fault",
      "0"
    ]
  },
  {
    question: "In C, what does the '->' operator do when used with pointers to structures?",
    correctAnswer: "Accesses a member of a structure through a pointer",
    incorrectAnswers: [
      "Dereferences the pointer",
      "Allocates memory for the structure",
      "Accesses the memory address of the structure"
    ]
  },
  {
    question: "What is the purpose of 'malloc' in C?",
    correctAnswer: "Allocates dynamic memory at runtime",
    incorrectAnswers: [
      "Frees memory allocated by malloc",
      "Allocates memory for global variables",
      "Initializes variables to default values"
    ]
  },
  {
    question: "Given the following code snippet: \n\nFILE *f = fopen('file.txt', 'r'); char buffer[100]; fgets(buffer, sizeof(buffer), f); What is the purpose of fgets?",
    correctAnswer: "Reads a line of text from a file",
    incorrectAnswers: [
      "Writes a line of text to a file",
      "Reads binary data from a file",
      "Closes the file"
    ]
  },
  {
    question: "What happens if you try to access a pointer that points to NULL?",
    correctAnswer: "It results in a segmentation fault",
    incorrectAnswers: [
      "It returns a value of zero",
      "It prints a warning message",
      "The program executes normally"
    ]
  },
  {
    question: "Given the following code: \n\nint main(int argc, char *argv[]) { printf('%d', argc); return 0; } What will be the output if the program is run with two command-line arguments?",
    correctAnswer: "3",
    incorrectAnswers: [
      "2",
      "1",
      "4"
    ]
  },
  {
    question: "What will happen if you forget to free dynamically allocated memory using 'free()' in C?",
    correctAnswer: "Memory leak",
    incorrectAnswers: [
      "Segmentation fault",
      "Buffer overflow",
      "Memory corruption"
    ]
  },
  {
    question: "What is the correct way to check if a file was successfully opened using 'fopen'?",
    correctAnswer: "Check if the file pointer is not NULL",
    incorrectAnswers: [
      "Check if the file pointer is 0",
      "Check if 'fopen' returns an integer value",
      "Check if 'fclose' returns 0"
    ]
  },
  {
    question: "In the following code: \n\nint a = 10; int *p = &a; What will the expression '*p' evaluate to?",
    correctAnswer: "10",
    incorrectAnswers: [
      "NULL",
      "The memory address of 'a'",
      "Segmentation fault"
    ]
  },
  {
    question: "What is the output of the following code? \n\nint* ptr = NULL; printf('%p', ptr);",
    correctAnswer: "0x0 (NULL address)",
    incorrectAnswers: [
      "Segmentation fault",
      "Random memory address",
      "0"
    ]
  },
  {
    question: "What does the following code print? \n\nint arr[] = {1, 2, 3}; int* p = arr; printf('%d', *(p + 2));",
    correctAnswer: "3",
    incorrectAnswers: [
      "1",
      "2",
      "Segmentation fault"
    ]
  },
  {
    question: "What is the result of dereferencing an uninitialized pointer?",
    correctAnswer: "Undefined behavior",
    incorrectAnswers: [
      "Zero",
      "NULL",
      "Segmentation fault"
    ]
  },
  {
    question: "What happens when a file opened with 'fopen' is not closed properly?",
    correctAnswer: "It may lead to resource leakage",
    incorrectAnswers: [
      "The file will be deleted",
      "It will cause an immediate crash",
      "Nothing will happen"
    ]
  },
  {
    question: "What does the command 'fgets(buffer, sizeof(buffer), stdin)' do in C?",
    correctAnswer: "Reads a line of text from the standard input into the buffer",
    incorrectAnswers: [
      "Writes a line of text to the standard input",
      "Reads binary data from the standard input",
      "Stops the program execution"
    ]
  },
  {
    question: "Given the following code: \n\nchar* str = 'Hello'; printf('%s', str + 2); What will be the output?",
    correctAnswer: "llo",
    incorrectAnswers: [
      "Hel",
      "Hello",
      "Segmentation fault"
    ]
  },
  {
    question: "Which of the following will result in a segmentation fault? \n\nA) Accessing an array out of bounds \nB) Dereferencing a NULL pointer \nC) Both A and B",
    correctAnswer: "C) Both A and B",
    incorrectAnswers: [
      "A) Accessing an array out of bounds",
      "B) Dereferencing a NULL pointer",
      "None of the above"
    ]
  },
  {
    question: "Given the following declaration: \n\nint* ptr = malloc(sizeof(int)); *ptr = 20; free(ptr); What happens if 'ptr' is dereferenced after the call to free?",
    correctAnswer: "It results in undefined behavior",
    incorrectAnswers: [
      "It prints the value 20",
      "It prints NULL",
      "It causes a segmentation fault"
    ]
  },
  {
    question: "What is the purpose of the 'sizeof' operator in C?",
    correctAnswer: "To determine the size, in bytes, of a variable or type",
    incorrectAnswers: [
      "To allocate memory dynamically",
      "To assign a value to a variable",
      "To check if a pointer is NULL"
    ]
  },
  {
    question: "What is the return value of 'fopen' if the file is opened successfully?",
    correctAnswer: "A pointer to the file stream",
    incorrectAnswers: [
      "0",
      "NULL",
      "A file descriptor"
    ]
  },
  {
    question: "What does the expression 'argc' represent in the main function signature 'int main(int argc, char *argv[])'?",
    correctAnswer: "The number of command-line arguments passed to the program",
    incorrectAnswers: [
      "The first command-line argument",
      "The memory address of the arguments",
      "The length of the argument string"
    ]
  },
  {
    question: "What happens if you pass a NULL pointer to the 'fgets' function?",
    correctAnswer: "It causes undefined behavior",
    incorrectAnswers: [
      "It reads an empty line",
      "It causes a segmentation fault",
      "It returns an empty string"
    ]
  },
  {
    question: "What will be the output of the following code? \n\nint x = 5; int* ptr = &x; printf('%d', *ptr);",
    correctAnswer: "5",
    incorrectAnswers: [
      "0",
      "Segmentation fault",
      "The address of x"
    ]
  },
  {
    question: "What happens when 'fclose' is called on a file that was never opened?",
    correctAnswer: "It results in undefined behavior",
    incorrectAnswers: [
      "It does nothing",
      "It causes a segmentation fault",
      "It prints an error message"
    ]
  },
  {
    question: "What will the following code print? \n\nchar* str = 'Hello'; printf('%c', *(str + 1));",
    correctAnswer: "e",
    incorrectAnswers: [
      "H",
      "l",
      "Segmentation fault"
    ]
  },
  {
    question: "What is the output of the following code? \n\nchar* ptr = 'Goodbye'; printf('%s', ptr + 4);",
    correctAnswer: "bye",
    incorrectAnswers: [
      "Goodbye",
      "o",
      "Segmentation fault"
    ]
  },
  {
    question: "What is the effect of calling 'free' on a NULL pointer?",
    correctAnswer: "It has no effect",
    incorrectAnswers: [
      "It causes a segmentation fault",
      "It frees the memory for the program",
      "It causes memory corruption"
    ]
  },
  {
    question: "What does the following code print? \n\nint a = 10; int* p = &a; *p = 20; printf('%d', a);",
    correctAnswer: "20",
    incorrectAnswers: [
      "10",
      "0",
      "Segmentation fault"
    ]
  },
  {
    question: "What happens when you access an element beyond the size of a dynamically allocated array?",
    correctAnswer: "It results in undefined behavior",
    incorrectAnswers: [
      "The program crashes immediately",
      "The array is resized automatically",
      "The element is initialized to zero"
    ]
  },
  {
    question: "What is the correct way to check if a pointer has been allocated memory using 'malloc'?",
    correctAnswer: "Check if the pointer is not NULL",
    incorrectAnswers: [
      "Check if the pointer is 0",
      "Check if the pointer is greater than zero",
      "Check if 'malloc' returns a non-zero value"
    ]
  }
];


        // Function to display the questions
        function displayQuestions() {
            const container = document.getElementById('question-container');
            theoreticalQuestions.forEach((question, index) => {
                const questionElement = document.createElement('div');
                questionElement.innerHTML = `
                    <h2>Question ${index + 1}: ${question.question}</h2>
                    <ul>
                        ${[question.correctAnswer, ...question.incorrectAnswers]
                            .sort(() => Math.random() - 0.5)
                            .map((answer, i) => `
                                <li>
                                    <input type="radio" name="question-${index}" value="${answer}" id="question-${index}-answer-${i}">
                                    <label for="question-${index}-answer-${i}">${answer}</label>
                                </li>
                            `).join('')}
                    </ul>
                    <button type="button" onclick="checkAnswer(${index})">Check Answer</button>
                    <div id="result-${index}" style="display:none;"></div>
                `;
                container.appendChild(questionElement);
            });
        }

        // Function to check the answer for a specific question
        function checkAnswer(index) {
            const selectedAnswer = document.querySelector(`input[name="question-${index}"]:checked`);
            const resultElement = document.getElementById(`result-${index}`);
            
            if (selectedAnswer) {
                if (selectedAnswer.value === theoreticalQuestions[index].correctAnswer) {
                    resultElement.textContent = "Correct!";
                    resultElement.style.color = 'green';
                } else {
                    resultElement.textContent = "Incorrect.";
                    resultElement.style.color = 'red';
                }
                resultElement.style.display = 'block';
            } else {
                resultElement.textContent = "Please select an answer.";
                resultElement.style.color = 'orange';
                resultElement.style.display = 'block';
            }
        }

        // Function to handle form submission and calculate score
        function handleSubmit(event) {
            event.preventDefault();
            let score = 0;
            
            theoreticalQuestions.forEach((question, index) => {
                const selectedAnswer = document.querySelector(`input[name="question-${index}"]:checked`);
                
                if (selectedAnswer && selectedAnswer.value === question.correctAnswer) {
                    score++;
                }
            });

            // Display the score
            const scoreElement = document.getElementById('score');
            scoreElement.textContent = `Your score is: ${score} out of ${theoreticalQuestions.length}`;
            scoreElement.style.display = 'block';
        }

        // Set up the form submit handler
        document.getElementById('quiz-form').addEventListener('submit', handleSubmit);

        // Call the display function when the page loads
        displayQuestions();
    </script>
</body>
</html>
